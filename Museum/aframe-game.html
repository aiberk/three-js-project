<html>
  <head>
    <!-- Aframe Library -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- Animation Mixer -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <!-- GIF Player Extension -->
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
    <!-- Custom component for Game Pieces -->
    <script src="js/game-chest.js"></script>
    <!-- Custom component for Links -->
    <!-- Custom component for Video -->
    <script src="js/video-control.js"></script>
    <!-- Custom component for Text -->
    <script src="js/message.js"></script>

    <script>
      //  TODO
      // - Create 3D Model - Done
      // - Create hover,failure,and success animations
      // - Export to Gltf
      // - Add to Code
      // - Figure out Lights
      // - Figure out Camera
      // - Figure out Sound - Done
      // - Get proper sounds
    </script>
    <script>
      // Picks a random number between 1-3 inclusive
      const chosen_box = Math.floor(Math.random() * 3);
      let click_count = 0;
      let user_success = false;

      AFRAME.registerComponent("image", {
        schema: {},
        init: function () {
          this.play();
          var data = this.data;
          var el = this.el;
          var mesh = el.getObject3D("mesh");

          el.addEventListener("click", function () {
            mesh.scale.x = 0;
            mesh.scale.y = 0;
            mesh.scale.z = 0;
          });
        },
        update: function (oldData) {
          this.el = this.data;
        },
        tick: function () {},
        remove: function () {},
        pause: function () {},
        play: function () {},
      });
    </script>
  </head>
  <body>
    <a-scene id="container">
      <a-assets>
        <a-asset-item id="suzy-gltf" src="assets/final.glb"></a-asset-item>
        <video id="movie" autoplay loop="true" src="assets/shuffle.mov"></video>

        <a-asset-tiem
          id="instructions"
          src="assets/instructions.png"
        ></a-asset-tiem>
        <audio id="hover" src="assets/hover_audio.wav" preload="auto"></audio>
        <audio id="success" src="assets/success.mp3" preload="auto"></audio>
        <audio
          id="rejected"
          src="assets/test_audio_rejected.wav"
          preload="auto"
        ></audio>
      </a-assets>

      <!-- <a-entity light position="0 1 -0.456"></a-entity>
      <a-entity light position="0 0 -0.456"></a-entity>
      <a-entity light position="0 -1 -0.456"></a-entity> -->

      <!-- <a-entity
        light="angle: 0; decay: 1.97; intensity: 3.61"
        position="0.0222 -0.11915 -0.456"
      ></a-entity> -->

      <a-entity
        light="angle: 0; decay: 1.97; intensity: 2.47;  type: ambient; castShadow: true"
        position="0.0222 -0.11915 -0.456"
      ></a-entity>

      <a-entity
        id="camera"
        camera="userHeight: 1.6"
        look-controls
        cursor="rayOrigin: mouse"
      ></a-entity>

      <!-- <a-video src="#movie" width="16" height="9" position="0 0 -20"></a-video> -->
      <a-image
        image
        src="#instructions"
        position="0 0 -2.775"
        scale="5 4 4"
      ></a-image>

      <a-entity
        game-chest
        id="0"
        gltf-model="#suzy-gltf"
        position="-2 -1.407 -4.151"
        scale="0.3 0.3 0.3"
        rotation="0 0 0"
      ></a-entity>

      <a-entity
        game-chest
        id="1"
        gltf-model="#suzy-gltf"
        position="0 -1.407 -4.151"
        scale="0.3 0.3 0.3"
        rotation="0 0 0"
      ></a-entity>

      <a-entity
        game-chest
        id="2"
        gltf-model="#suzy-gltf"
        position="2 -1.407 -4.151"
        scale="0.3 0.3 0.3"
        rotation="0 0 0"
      ></a-entity>

      <a-sky color="#fff"></a-sky>
      <a-entity
        geometry="depth: 0.4; height: 0.4"
        material="color: #36454F"
        position="0 -2 -4.03026"
        scale="30.98 1 50"
      ></a-entity>
    </a-scene>
  </body>
</html>

<!-- <a-text
        message
        value=""
        scale="1 1 1"
        position="-0.6 0.58877 -2"
        rotation=""
        id="main-text"
        geometry="primitive:plane; width:100;"
      ></a-text> -->

<!-- <a-entity
        message
        text="value: Chest Game"
        id="main-text"
        position="-0.6 0.58877 -2"
      ></a-entity> -->
